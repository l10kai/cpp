# D. Iris and Game on the Tree



## 题意
给出一棵树，树上每个节点都有三种状态：0、1、？。对于某叶子节点，根据其构造一个字符串：从根节点到该节点路径上的所有节点的状态。在该字符串上，所有10与01子字符串个数的差值即为该叶子节点的权重。

树的分数定义为树中非零权重的叶子数。

现在Alice和Bob交替将节点状态中的“？”改为“0”或“1”，Alice先手，且希望最大化树的分数，Bob希望最小化树的分数。

当“？”被修改完时游戏结束，求最终树的得分？



## 思路
通过观察可以发现，一条从根到叶子的路径是否有得分，只取决于根节点与叶子节点是否相同。相同则无贡献，不同则有贡献。
那么双方博弈就只用看根节点和叶子的情况，先手抢占有利的一方即可。
只有一种特殊情况下需要考虑到路径节点上的“？”，即当根节点为“？”，且叶子节点中“0”，“1”的数量相等时（也可以都为0），此时双方处于平衡状态，在根节点和叶子节点上先手的一方反而会成为后手，所以Alice需要利用中间路径上的”？”来拉扯一下，如果中间路径上的“？”数量为奇数，那么通过拉扯就可以使先后手转换，那么Bob就不会亏掉这一分。

由此题可以发现，树上博弈问题可以考虑从根节点，叶子节点等关系出发，找到性质，实现简单求解。