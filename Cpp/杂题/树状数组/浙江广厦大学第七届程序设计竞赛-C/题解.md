# C 菠萝蜜多斩(区间不同数的个数)



## 题意

给定一个长度为n的数组a，有m组询问， 每组询问给定一个区间l, r，求区间内出现次数为偶数次的数的异或和

## 	数据范围

$n,m <= 1000000，1 <= l <= r <= n，a[i] <= 2^{30}$

## 题解



对于一个区间，求区间内出现次数为奇数次的数的异或和就是这个区间的异或和，设为 x

所以我们可以通过求出**区间内所有不同的数的异或和**，设为 y，x 异或 y 即是答案

x 可以简单地通过前缀数组的形式求出，求出 y 的一种方法是用离线排序+树状数组，时间复杂度 $O( m\cdot log n )$

难点在于求y,区间内所有不同的数的异或和。

**也就是区间内出现的每个数被异或且只异或一次**

树状数组可以非常容易的实现单点修改和区间查询，我们应该用**”可以在线添加数的前缀和“**的视角来理解树状数组

又由于本题没有修改操作，可以离线

那么实现该题的方法就非常简单

下面给出两种方法：

方法一：

将m个区间按**左端点**从小到大进行排序

把把每个第一次出现的数添加进树状数组。这样就保证了每个数只出现一次，但是现在它可能并不在区间里，我们只需要不断把在区间左端点左边的那个数往右边挪就行

因为询问按左端点从小到大排序，在处理每次询问的时候，左端点左边**已经被加进去的数**就没有用了

方法二

将m个区间按**右端点**从小到大进行排序

每次处理右端点时，不断把前面没添加的数添加进树状数组，对于每个数，如果在它前面它已经出现了，就再add一次把它异或掉，同样能保证每个数只出现一次

#### 



